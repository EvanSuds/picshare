{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\evan_\\\\Documents\\\\GitHub\\\\F29SO-Picshare\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\evan_\\\\Documents\\\\GitHub\\\\F29SO-Picshare\\\\client\\\\src\\\\App.js\";\nimport React, { useState, useEffect } from 'react';\nimport './App.css';\nimport Axios from 'axios';\nimport { resolve } from 'dns';\nimport PasswordStrength from \"./passwordStrength\";\nimport Button from \"react-bootstrap/Button\";\nimport { BrowserRouter, Switch, Route, Link, Redirect, withRouter, useHistory } from \"react-router-dom\";\nimport Profile from \"./profile\";\nimport ProtectedRoute from \"./protectedRoute\";\nimport up from \"./upA.png\";\n\nfunction App(props) {\n  var history = useHistory();\n\n  var redirect = function redirect(path) {\n    history.push(path);\n  }; //username for registration\n\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      UsernameReg = _useState2[0],\n      setUsernameReg = _useState2[1]; //username for registration\n\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      EmailReg = _useState4[0],\n      setEmailReg = _useState4[1]; //password for registration \n\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      PasswordReg = _useState6[0],\n      setPasswordReg = _useState6[1]; //confirm password for registration \n\n\n  var _useState7 = useState(''),\n      _useState8 = _slicedToArray(_useState7, 2),\n      ConPasswordReg = _useState8[0],\n      setConPasswordReg = _useState8[1]; //username for login\n\n\n  var _useState9 = useState(''),\n      _useState10 = _slicedToArray(_useState9, 2),\n      UsernameEmail = _useState10[0],\n      setUsernameEmail = _useState10[1]; //password for login \n\n\n  var _useState11 = useState(''),\n      _useState12 = _slicedToArray(_useState11, 2),\n      Password = _useState12[0],\n      setPassword = _useState12[1];\n\n  var _useState13 = useState(false),\n      _useState14 = _slicedToArray(_useState13, 2),\n      passwordFocus = _useState14[0],\n      setPasswordFocus = _useState14[1];\n\n  var _useState15 = useState({\n    minlength: null,\n    number: null,\n    specialChar: null,\n    illegalChar: null\n  }),\n      _useState16 = _slicedToArray(_useState15, 2),\n      passwordValid = _useState16[0],\n      setPasswordValid = _useState16[1]; //checks if a user is logged in \n\n\n  var _useState17 = useState(false),\n      _useState18 = _slicedToArray(_useState17, 2),\n      isLoggedIn = _useState18[0],\n      setisLoggedIn = _useState18[1]; //checks if a user is logged in \n\n\n  var _useState19 = useState(false),\n      _useState20 = _slicedToArray(_useState19, 2),\n      isRegi = _useState20[0],\n      setisRegi = _useState20[1]; //status of the feedback header at the bottom of the page \n\n\n  var _useState21 = useState(''),\n      _useState22 = _slicedToArray(_useState21, 2),\n      status = _useState22[0],\n      setStatus = _useState22[1]; //toggle for registration div\n\n\n  var _useState23 = useState(false),\n      _useState24 = _slicedToArray(_useState23, 2),\n      show = _useState24[0],\n      setShow = _useState24[1]; //credintials for get, using axios\n\n\n  Axios.defaults.withCredentials = true;\n  var isNumber = /\\d/;\n  var specialCharacterRegx = /[ !@#$%^&*()_+\\-=\\[\\]{}'\"\\\\|,.\\/]/;\n  var illegalCharacterRegx = /[<>;:?]/;\n\n  var checkValidity = function checkValidity(password) {\n    setPasswordValid({\n      minlength: password.length >= 8 ? true : false,\n      number: isNumber.test(password) ? true : false,\n      specialChar: specialCharacterRegx.test(password) ? true : false,\n      illegalChar: illegalCharacterRegx.test(password) ? false : true\n    });\n  }; // register post method \n\n\n  function register() {\n    if (passwordValid.illegalChar === true && passwordValid.minlength === true && passwordValid.specialChar === true && passwordValid.number === true) {\n      if (PasswordReg === ConPasswordReg) {\n        Axios.post('http://localhost:3001/register', {\n          username: UsernameReg,\n          password: PasswordReg,\n          email: EmailReg\n        }).then(function (response) {\n          console.log(\"this is regi response \" + response);\n\n          if (response.data.message) {\n            setStatus(response.data.message);\n          }\n        });\n        setisRegi(true);\n        setStatus(\"You have registered!\");\n      } else {\n        setStatus(\"Passwords do not match\");\n      }\n    } else {\n      setStatus(\"Password is invalid\");\n    }\n  }\n\n  ; // login post method \n\n  var login = function login() {\n    Axios.post('http://localhost:3001/login', {\n      usernameEmail: UsernameEmail,\n      password: Password\n    }).then(function (response) {\n      if (response.data.message) {\n        setStatus(response.data.message);\n        setisLoggedIn(false);\n      } else {\n        //console.log(response);\n        //setStatus(response.data[0].Username);\n        setisLoggedIn(true);\n\n        if (response.data[0].Username !== \"\" && response.data[0].password !== \"\") {\n          redirect(\"/profile\");\n        } else {\n          setStatus(\"Please enter a username and password\");\n        }\n      }\n    });\n  }; // login post method \n\n\n  var refresh = function refresh() {\n    Axios.post('http://localhost:3001/refresh', {}).then(function (response) {\n      console.log(\"refresh response\" + response);\n    });\n  }; // login post method \n\n\n  var update = function update() {\n    Axios.post('http://localhost:3001/updateTable', {}).then(function (response) {\n      console.log(\"update response\" + response);\n    });\n  }; // login post method \n\n\n  var loginRegi = function loginRegi() {\n    Axios.post('http://localhost:3001/login', {\n      usernameEmail: UsernameReg,\n      password: PasswordReg\n    }).then(function (response) {\n      //console.log(\"details \" + UsernameReg + PasswordReg)\n      if (response.data.message) {\n        //console.log(\"login regis response \" + response.data.message);\n        setisLoggedIn(false);\n      } else {\n        //console.log(\"this is the login \" + response);\n        redirect(\"/regiLanding\");\n      }\n    });\n  };\n\n  var help = function help() {\n    setTimeout(update(), 5000);\n    setTimeout(refresh(), 5000);\n    setTimeout(loginRegi(), 5000);\n  }; //on page loading check if cookie exist for user being logged  in\n\n\n  useEffect(function () {\n    Axios.get('http://localhost:3001/checklogin').then(function (response) {\n      if (response.data.loggedIn === true) {\n        //console.log(response);\n        //setStatus(response.data.user[0].Username);\n        setisLoggedIn(true);\n      }\n    });\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"regi\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"headings\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 7\n    }\n  }, \"Sign Up\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"regiUN\",\n    type: \"text\",\n    placeholder: \"Username\",\n    onChange: function onChange(e) {\n      setUsernameReg(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"regiEmail\",\n    type: \"text\",\n    placeholder: \"Optional Email\",\n    onChange: function onChange(e) {\n      setEmailReg(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"regiP\",\n    type: \"text\",\n    onFocus: function onFocus() {\n      return setPasswordFocus(true);\n    },\n    onBlur: function onBlur() {\n      return setPasswordFocus(false);\n    },\n    placeholder: \"Password\",\n    onChange: function onChange(e) {\n      setPasswordReg(e.target.value);\n      checkValidity(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"conRegiP\",\n    type: \"text\",\n    placeholder: \"Confirm password\",\n    onChange: function onChange(e) {\n      setConPasswordReg(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 7\n    }\n  }), passwordFocus ? /*#__PURE__*/React.createElement(PasswordStrength, {\n    validity: passwordValid,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 23\n    }\n  }) : null, /*#__PURE__*/React.createElement(Button, {\n    className: \"button\",\n    onClick: function onClick(e) {\n      register();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 7\n    }\n  }, \"Sign up\"), //reveal status below regi form\n  !show ? /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"headings\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 7\n    }\n  }, status) : null, isRegi ? /*#__PURE__*/React.createElement(Button, {\n    onClick: help,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 5\n    }\n  }, \" set up profile\") : null), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 5\n    }\n  }), //reveal login form\n  !show ?\n  /*#__PURE__*/\n  //button for toggling open registration div\n  React.createElement(Button, {\n    className: \"button2\",\n    onClick: function onClick() {\n      setShow(!show);\n      setStatus(\"\");\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 5\n    }\n  }, \"Already a member? login \") : null, show ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 12\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"headings\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 7\n    }\n  }, \"Login\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"logUN\",\n    type: \"text\",\n    placeholder: \"Username or Email\",\n    onChange: function onChange(e) {\n      setUsernameEmail(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"logP\",\n    type: \"text\",\n    placeholder: \"Password\",\n    onChange: function onChange(e) {\n      setPassword(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    className: \"button\",\n    onClick: login,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 298,\n      columnNumber: 7\n    }\n  }, \"Login\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    className: \"button2\",\n    onClick: function onClick() {\n      setShow(!show);\n      setStatus(\"\");\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 7\n    }\n  }, \" \", /*#__PURE__*/React.createElement(\"img\", {\n    className: \"up\",\n    alt: \"hide\",\n    src: up,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 12\n    }\n  }), \" \")) : null, // reveal status below login form\n  show ? /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"headings\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 5\n    }\n  }, status) : null);\n}\n\nexport default App;","map":{"version":3,"sources":["C:/Users/evan_/Documents/GitHub/F29SO-Picshare/client/src/App.js"],"names":["React","useState","useEffect","Axios","resolve","PasswordStrength","Button","BrowserRouter","Switch","Route","Link","Redirect","withRouter","useHistory","Profile","ProtectedRoute","up","App","props","history","redirect","path","push","UsernameReg","setUsernameReg","EmailReg","setEmailReg","PasswordReg","setPasswordReg","ConPasswordReg","setConPasswordReg","UsernameEmail","setUsernameEmail","Password","setPassword","passwordFocus","setPasswordFocus","minlength","number","specialChar","illegalChar","passwordValid","setPasswordValid","isLoggedIn","setisLoggedIn","isRegi","setisRegi","status","setStatus","show","setShow","defaults","withCredentials","isNumber","specialCharacterRegx","illegalCharacterRegx","checkValidity","password","length","test","register","post","username","email","then","response","console","log","data","message","login","usernameEmail","Username","refresh","update","loginRegi","help","setTimeout","get","loggedIn","e","target","value"],"mappings":"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","sourcesContent":["import React, {useState, useEffect}       from 'react';\r\nimport './App.css';\r\nimport Axios from 'axios';\r\nimport { resolve } from 'dns';\r\nimport PasswordStrength from \"./passwordStrength\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport {BrowserRouter , Switch, Route, Link, Redirect, withRouter, useHistory }from \"react-router-dom\";\r\nimport Profile from \"./profile\";\r\nimport ProtectedRoute from \"./protectedRoute\";\r\nimport up from \"./upA.png\"\r\n\r\n\r\n\r\n\r\n\r\n\r\nfunction App(props) {\r\n\r\n  \r\n  \r\n  const history = useHistory();\r\n  \r\n  const redirect = (path) => {\r\n    \r\n    history.push(path);\r\n  };\r\n  \r\n  \r\n  //username for registration\r\n  const [UsernameReg, setUsernameReg] = useState('');\r\n\r\n  //username for registration\r\n  const [EmailReg, setEmailReg] = useState('');\r\n\r\n  //password for registration \r\n  const [PasswordReg, setPasswordReg] = useState('');\r\n\r\n  //confirm password for registration \r\n  const [ConPasswordReg, setConPasswordReg] = useState('');\r\n\r\n  //username for login\r\n  const [UsernameEmail, setUsernameEmail] = useState('');\r\n\r\n  //password for login \r\n  const [Password, setPassword] = useState('');\r\n\r\n  const [passwordFocus, setPasswordFocus] = useState(false);\r\n\r\n  const [passwordValid, setPasswordValid] = useState({\r\n    minlength: null,\r\n    number: null,\r\n    specialChar: null,\r\n    illegalChar: null\r\n  });\r\n\r\n//checks if a user is logged in \r\n  const [isLoggedIn, setisLoggedIn] = useState(false);\r\n\r\n  //checks if a user is logged in \r\n  const [isRegi, setisRegi] = useState(false);\r\n  \r\n\r\n  //status of the feedback header at the bottom of the page \r\n  const [status, setStatus] = useState('');\r\n\r\n\r\n  //toggle for registration div\r\n  const [show, setShow] = useState(false);\r\n\r\n\r\n\r\n  //credintials for get, using axios\r\n  Axios.defaults.withCredentials = true;\r\n\r\n\r\n\r\n  const isNumber =/\\d/;\r\n  const specialCharacterRegx = /[ !@#$%^&*()_+\\-=\\[\\]{}'\"\\\\|,.\\/]/;\r\n  const illegalCharacterRegx = /[<>;:?]/;\r\n\r\n  const checkValidity = password => {\r\n    setPasswordValid({\r\n      minlength: password.length >= 8 ? true : false,\r\n      number: isNumber.test(password) ? true : false,\r\n      specialChar: specialCharacterRegx.test(password) ? true : false,\r\n      illegalChar: illegalCharacterRegx.test(password) ? false : true \r\n    })\r\n  }\r\n\r\n \r\n  \r\n  \r\n  // register post method \r\n  function register(){\r\n    \r\n\r\n    if(passwordValid.illegalChar === true && passwordValid.minlength === true && passwordValid.specialChar === true && passwordValid.number === true) {\r\n      if(PasswordReg === ConPasswordReg){\r\n        \r\n        Axios.post('http://localhost:3001/register', {\r\n        username: UsernameReg,\r\n        password: PasswordReg,\r\n        email: EmailReg\r\n  \r\n        }).then((response) => {\r\n          console.log(\"this is regi response \" +response)\r\n          if(response.data.message){\r\n            setStatus(response.data.message)\r\n          }\r\n          \r\n        \r\n\r\n        \r\n        });\r\n        setisRegi(true);\r\n        setStatus(\"You have registered!\");\r\n        \r\n        \r\n        \r\n        \r\n      }\r\n      else{\r\n        setStatus(\"Passwords do not match\");\r\n      }\r\n      \r\n    }\r\n    else {\r\n      setStatus(\"Password is invalid\");\r\n    }\r\n  };\r\n\r\n  \r\n  // login post method \r\n  const login = () => {\r\n    \r\n    Axios.post('http://localhost:3001/login', {\r\n      usernameEmail: UsernameEmail,\r\n      password: Password,\r\n\r\n  }).then((response) => {\r\n    if(response.data.message){\r\n      setStatus(response.data.message);\r\n      setisLoggedIn(false);\r\n    }\r\n    else {\r\n      //console.log(response);\r\n      //setStatus(response.data[0].Username);\r\n      setisLoggedIn(true);\r\n      if(response.data[0].Username !==\"\" && response.data[0].password !== \"\"){\r\n        redirect(\"/profile\");\r\n      }else {\r\n        setStatus(\"Please enter a username and password\");\r\n      }\r\n      \r\n      \r\n     \r\n      \r\n      \r\n      \r\n    }\r\n  });\r\n  };\r\n\r\n\r\n\r\n// login post method \r\nconst refresh = ()=>{\r\n  \r\n  Axios.post('http://localhost:3001/refresh', {\r\n\r\n\r\n}).then((response) => {\r\n  console.log(\"refresh response\" + response)\r\n});\r\n};\r\n\r\n\r\n// login post method \r\nconst update = () => {\r\n  \r\n  Axios.post('http://localhost:3001/updateTable', {\r\n\r\n\r\n}).then((response) => {\r\n  console.log(\"update response\" + response)\r\n});\r\n};\r\n\r\n\r\n // login post method \r\n const loginRegi =  ()=>{\r\n  Axios.post('http://localhost:3001/login', {\r\n    usernameEmail: UsernameReg,\r\n    password: PasswordReg,\r\n\r\n}).then((response) => {\r\n  //console.log(\"details \" + UsernameReg + PasswordReg)\r\n  if(response.data.message){\r\n    //console.log(\"login regis response \" + response.data.message);\r\n    setisLoggedIn(false);\r\n  }else{\r\n    //console.log(\"this is the login \" + response);\r\n    redirect(\"/regiLanding\")\r\n  }\r\n\r\n});\r\n};\r\n\r\n\r\nconst help = () => {\r\n  setTimeout(update(), 5000)\r\n  setTimeout(refresh(), 5000)\r\n  setTimeout(loginRegi(),5000)\r\n}\r\n\r\n\r\n\r\n\r\n//on page loading check if cookie exist for user being logged  in\r\nuseEffect( ()=> {\r\n    Axios.get('http://localhost:3001/checklogin').then((response)=> {\r\n    if(response.data.loggedIn === true){\r\n      //console.log(response);\r\n      //setStatus(response.data.user[0].Username);\r\n      setisLoggedIn(true);\r\n      \r\n    }\r\n    \r\n    });\r\n  }, []);\r\n\r\n  \r\n return (\r\n\r\n  \r\n  <div className=\"App\">\r\n    <div className=\"regi\">\r\n\r\n      <h1 className=\"headings\">Sign Up</h1>\r\n      {/*input for registration username */}\r\n      <input className=\"regiUN\" type=\"text\" placeholder=\"Username\" onChange={(e) => {\r\n        setUsernameReg(e.target.value);\r\n      }}/>\r\n      <input className=\"regiEmail\" type=\"text\" placeholder=\"Optional Email\" onChange={(e) => {\r\n        setEmailReg(e.target.value);\r\n      }}/>\r\n      {/*input for registration password */}\r\n      <input className=\"regiP\" type=\"text\" onFocus={ () => setPasswordFocus(true)} onBlur={ () => setPasswordFocus(false)} placeholder=\"Password\" onChange={(e) => {\r\n        \r\n        setPasswordReg(e.target.value);\r\n        checkValidity(e.target.value);\r\n      }} />\r\n\r\n      {/*input for registration confirmation password */}\r\n      <input className=\"conRegiP\" type=\"text\" placeholder=\"Confirm password\" onChange={(e) => {\r\n        setConPasswordReg(e.target.value);\r\n      }} />\r\n\r\n      {passwordFocus? <PasswordStrength validity={passwordValid}/>:null}\r\n\r\n      {/* register button that calls register function */}\r\n      <Button className=\"button\" onClick={(e) => { \r\n        register()\r\n      }}>Sign up</Button>\r\n      {//reveal status below regi form\r\n       !show?\r\n      <h2 className=\"headings\">{status}</h2>:null\r\n    }\r\n    { isRegi?\r\n    <Button onClick={help}> set up profile</Button>:null\r\n    }\r\n    </div>\r\n    <br></br>\r\n    {/*button for toggling open registration div */}\r\n    \r\n    { //reveal login form\r\n      !show?\r\n    //button for toggling open registration div\r\n    \r\n    <Button className=\"button2\" onClick={()=> {\r\n      setShow(!show)\r\n      setStatus(\"\")\r\n    }}> \r\n    Already a member? login </Button>:null\r\n    }\r\n    { \r\n      show?<div className=\"login\">\r\n\r\n      <h1 className=\"headings\">Login</h1>\r\n      {/*input for login username*/}\r\n      <input className=\"logUN\" type=\"text\" placeholder=\"Username or Email\" onChange={(e) => {\r\n        setUsernameEmail(e.target.value);\r\n      }} />\r\n      {/*input for login password */}\r\n      <input className=\"logP\" type=\"text\" placeholder=\"Password\" onChange={(e) => {\r\n        setPassword(e.target.value);\r\n      }}/>\r\n      <Button className=\"button\" onClick={ login }>Login</Button>\r\n      <br></br>\r\n      <Button className=\"button2\" onClick={()=> {\r\n        setShow(!show);\r\n        setStatus(\"\")}\r\n        }> <img className=\"up\" alt=\"hide\" src={up} /> </Button>\r\n\r\n      \r\n     \r\n      \r\n\r\n\r\n    \r\n\r\n</div>:null\r\n  }\r\n   {/* header for feedback of login or registration status */}\r\n   \r\n  { // reveal status below login form\r\n  show?\r\n    <h2 className=\"headings\">{status}</h2>:null\r\n    }\r\n</div>\r\n\r\n\r\n );\r\n\r\n\r\n   \r\n}\r\n\r\nexport default App;\r\n\r\n"]},"metadata":{},"sourceType":"module"}