{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"C:/Users/evan_/Documents/GitHub/picshare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import'./App.css';import Axios from'axios';import{resolve}from'dns';import PasswordStrength from\"./passwordStrength\";import Button from\"react-bootstrap/Button\";import{BrowserRouter,Switch,Route,Link,Redirect,withRouter,useHistory}from\"react-router-dom\";import Profile from\"./profile\";import ProtectedRoute from\"./protectedRoute\";import up from\"./upA.png\";function App(props){var history=useHistory();var redirect=function redirect(path){history.push(path);};//username for registration\nvar _useState=useState(''),_useState2=_slicedToArray(_useState,2),UsernameReg=_useState2[0],setUsernameReg=_useState2[1];//username for registration\nvar _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),EmailReg=_useState4[0],setEmailReg=_useState4[1];//password for registration\nvar _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),PasswordReg=_useState6[0],setPasswordReg=_useState6[1];//confirm password for registration\nvar _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),ConPasswordReg=_useState8[0],setConPasswordReg=_useState8[1];//username for login\nvar _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),UsernameEmail=_useState10[0],setUsernameEmail=_useState10[1];//password for login\nvar _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),Password=_useState12[0],setPassword=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),passwordFocus=_useState14[0],setPasswordFocus=_useState14[1];var _useState15=useState({minlength:null,number:null,specialChar:null,illegalChar:null}),_useState16=_slicedToArray(_useState15,2),passwordValid=_useState16[0],setPasswordValid=_useState16[1];//checks if a user is logged in\nvar _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),isLoggedIn=_useState18[0],setisLoggedIn=_useState18[1];//checks if a user is logged in\nvar _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),isRegi=_useState20[0],setisRegi=_useState20[1];//status of the feedback header at the bottom of the page\nvar _useState21=useState(''),_useState22=_slicedToArray(_useState21,2),status=_useState22[0],setStatus=_useState22[1];//toggle for registration div\nvar _useState23=useState(false),_useState24=_slicedToArray(_useState23,2),show=_useState24[0],setShow=_useState24[1];//credintials for get, using axios\nAxios.defaults.withCredentials=true;var isNumber=/\\d/;var specialCharacterRegx=/[ !@#$%^&*()_+\\-=\\[\\]{}'\"\\\\|,.\\/]/;var illegalCharacterRegx=/[<>;:?]/;var checkValidity=function checkValidity(password){setPasswordValid({minlength:password.length>=8?true:false,number:isNumber.test(password)?true:false,specialChar:specialCharacterRegx.test(password)?true:false,illegalChar:illegalCharacterRegx.test(password)?false:true});};// register post method\nfunction register(){if(passwordValid.illegalChar===true&&passwordValid.minlength===true&&passwordValid.specialChar===true&&passwordValid.number===true){if(PasswordReg===ConPasswordReg){Axios.post('http://localhost:3001/register',{username:UsernameReg,password:PasswordReg,email:EmailReg}).then(function(response){console.log(\"this is regi response \"+response);if(response.data.message){setStatus(response.data.message);}});setisRegi(true);setStatus(\"You have registered!\");}else{setStatus(\"Passwords do not match\");}}else{setStatus(\"Password is invalid\");}};// login post method\nvar login=function login(){Axios.post('http://localhost:3001/login',{usernameEmail:UsernameEmail,password:Password}).then(function(response){if(response.data.message){setStatus(response.data.message);setisLoggedIn(false);}else{//console.log(response);\n//setStatus(response.data[0].Username);\nsetisLoggedIn(true);if(response.data[0].Username!==\"\"&&response.data[0].password!==\"\"){redirect(\"/profile\");}else{setStatus(\"Please enter a username and password\");}}});};// login post method\nvar refresh=function refresh(){Axios.post('http://localhost:3001/refresh',{}).then(function(response){console.log(\"refresh response\"+response);});};// login post method\nvar update=function update(){Axios.post('http://localhost:3001/updateTable',{}).then(function(response){console.log(\"update response\"+response);});};// login post method\nvar loginRegi=function loginRegi(){Axios.post('http://localhost:3001/login',{usernameEmail:UsernameReg,password:PasswordReg}).then(function(response){//console.log(\"details \" + UsernameReg + PasswordReg)\nif(response.data.message){//console.log(\"login regis response \" + response.data.message);\nsetisLoggedIn(false);}else{//console.log(\"this is the login \" + response);\nredirect(\"/regiLanding\");}});};var help=function help(){setTimeout(update(),5000);setTimeout(refresh(),5000);setTimeout(loginRegi(),5000);};//on page loading check if cookie exist for user being logged  in\nuseEffect(function(){Axios.get('http://localhost:3001/checklogin').then(function(response){if(response.data.loggedIn===true){//console.log(response);\n//setStatus(response.data.user[0].Username);\nsetisLoggedIn(true);}});},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"regi\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"headings\",children:\"Sign Up\"}),/*#__PURE__*/_jsx(\"input\",{className:\"regiUN\",type:\"text\",placeholder:\"Username\",onChange:function onChange(e){setUsernameReg(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{className:\"regiEmail\",type:\"text\",placeholder:\"Optional Email\",onChange:function onChange(e){setEmailReg(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{className:\"regiP\",type:\"text\",onFocus:function onFocus(){return setPasswordFocus(true);},onBlur:function onBlur(){return setPasswordFocus(false);},placeholder:\"Password\",onChange:function onChange(e){setPasswordReg(e.target.value);checkValidity(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{className:\"conRegiP\",type:\"text\",placeholder:\"Confirm password\",onChange:function onChange(e){setConPasswordReg(e.target.value);}}),passwordFocus?/*#__PURE__*/_jsx(PasswordStrength,{validity:passwordValid}):null,/*#__PURE__*/_jsx(Button,{className:\"button\",onClick:function onClick(e){register();},children:\"Sign up\"}),//reveal status below regi form\n!show?/*#__PURE__*/_jsx(\"h2\",{className:\"headings\",children:status}):null,isRegi?/*#__PURE__*/_jsx(Button,{onClick:help,children:\" set up profile\"}):null]}),/*#__PURE__*/_jsx(\"br\",{}),//reveal login form\n!show?/*#__PURE__*/ //button for toggling open registration div\n_jsx(Button,{className:\"button2\",onClick:function onClick(){setShow(!show);setStatus(\"\");},children:\"Already a member? login \"}):null,show?/*#__PURE__*/_jsxs(\"div\",{className:\"login\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"headings\",children:\"Login\"}),/*#__PURE__*/_jsx(\"input\",{className:\"logUN\",type:\"text\",placeholder:\"Username or Email\",onChange:function onChange(e){setUsernameEmail(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{className:\"logP\",type:\"text\",placeholder:\"Password\",onChange:function onChange(e){setPassword(e.target.value);}}),/*#__PURE__*/_jsx(Button,{className:\"button\",onClick:login,children:\"Login\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(Button,{className:\"button2\",onClick:function onClick(){setShow(!show);setStatus(\"\");},children:[\" \",/*#__PURE__*/_jsx(\"img\",{className:\"up\",alt:\"hide\",src:up}),\" \"]})]}):null,// reveal status below login form\nshow?/*#__PURE__*/_jsx(\"h2\",{className:\"headings\",children:status}):null]});}export default App;","map":{"version":3,"sources":["C:/Users/evan_/Documents/GitHub/picshare/src/App.js"],"names":["React","useState","useEffect","Axios","resolve","PasswordStrength","Button","BrowserRouter","Switch","Route","Link","Redirect","withRouter","useHistory","Profile","ProtectedRoute","up","App","props","history","redirect","path","push","UsernameReg","setUsernameReg","EmailReg","setEmailReg","PasswordReg","setPasswordReg","ConPasswordReg","setConPasswordReg","UsernameEmail","setUsernameEmail","Password","setPassword","passwordFocus","setPasswordFocus","minlength","number","specialChar","illegalChar","passwordValid","setPasswordValid","isLoggedIn","setisLoggedIn","isRegi","setisRegi","status","setStatus","show","setShow","defaults","withCredentials","isNumber","specialCharacterRegx","illegalCharacterRegx","checkValidity","password","length","test","register","post","username","email","then","response","console","log","data","message","login","usernameEmail","Username","refresh","update","loginRegi","help","setTimeout","get","loggedIn","e","target","value"],"mappings":"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","sourcesContent":["import React, {useState, useEffect}       from 'react';\r\nimport './App.css';\r\nimport Axios from 'axios';\r\nimport { resolve } from 'dns';\r\nimport PasswordStrength from \"./passwordStrength\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport {BrowserRouter , Switch, Route, Link, Redirect, withRouter, useHistory }from \"react-router-dom\";\r\nimport Profile from \"./profile\";\r\nimport ProtectedRoute from \"./protectedRoute\";\r\nimport up from \"./upA.png\"\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nfunction App(props) {\r\n\r\n\r\n\r\n  const history = useHistory();\r\n\r\n  const redirect = (path) => {\r\n\r\n    history.push(path);\r\n  };\r\n\r\n\r\n  //username for registration\r\n  const [UsernameReg, setUsernameReg] = useState('');\r\n\r\n  //username for registration\r\n  const [EmailReg, setEmailReg] = useState('');\r\n\r\n  //password for registration\r\n  const [PasswordReg, setPasswordReg] = useState('');\r\n\r\n  //confirm password for registration\r\n  const [ConPasswordReg, setConPasswordReg] = useState('');\r\n\r\n  //username for login\r\n  const [UsernameEmail, setUsernameEmail] = useState('');\r\n\r\n  //password for login\r\n  const [Password, setPassword] = useState('');\r\n\r\n  const [passwordFocus, setPasswordFocus] = useState(false);\r\n\r\n  const [passwordValid, setPasswordValid] = useState({\r\n    minlength: null,\r\n    number: null,\r\n    specialChar: null,\r\n    illegalChar: null\r\n  });\r\n\r\n//checks if a user is logged in\r\n  const [isLoggedIn, setisLoggedIn] = useState(false);\r\n\r\n  //checks if a user is logged in\r\n  const [isRegi, setisRegi] = useState(false);\r\n\r\n\r\n  //status of the feedback header at the bottom of the page\r\n  const [status, setStatus] = useState('');\r\n\r\n\r\n  //toggle for registration div\r\n  const [show, setShow] = useState(false);\r\n\r\n\r\n\r\n  //credintials for get, using axios\r\n  Axios.defaults.withCredentials = true;\r\n\r\n\r\n\r\n  const isNumber =/\\d/;\r\n  const specialCharacterRegx = /[ !@#$%^&*()_+\\-=\\[\\]{}'\"\\\\|,.\\/]/;\r\n  const illegalCharacterRegx = /[<>;:?]/;\r\n\r\n  const checkValidity = password => {\r\n    setPasswordValid({\r\n      minlength: password.length >= 8 ? true : false,\r\n      number: isNumber.test(password) ? true : false,\r\n      specialChar: specialCharacterRegx.test(password) ? true : false,\r\n      illegalChar: illegalCharacterRegx.test(password) ? false : true\r\n    })\r\n  }\r\n\r\n\r\n\r\n\r\n  // register post method\r\n  function register(){\r\n\r\n\r\n    if(passwordValid.illegalChar === true && passwordValid.minlength === true && passwordValid.specialChar === true && passwordValid.number === true) {\r\n      if(PasswordReg === ConPasswordReg){\r\n\r\n        Axios.post('http://localhost:3001/register', {\r\n        username: UsernameReg,\r\n        password: PasswordReg,\r\n        email: EmailReg\r\n\r\n        }).then((response) => {\r\n          console.log(\"this is regi response \" +response)\r\n          if(response.data.message){\r\n            setStatus(response.data.message)\r\n          }\r\n\r\n\r\n\r\n\r\n        });\r\n        setisRegi(true);\r\n        setStatus(\"You have registered!\");\r\n\r\n\r\n\r\n\r\n      }\r\n      else{\r\n        setStatus(\"Passwords do not match\");\r\n      }\r\n\r\n    }\r\n    else {\r\n      setStatus(\"Password is invalid\");\r\n    }\r\n  };\r\n\r\n\r\n  // login post method\r\n  const login = () => {\r\n\r\n    Axios.post('http://localhost:3001/login', {\r\n      usernameEmail: UsernameEmail,\r\n      password: Password,\r\n\r\n  }).then((response) => {\r\n    if(response.data.message){\r\n      setStatus(response.data.message);\r\n      setisLoggedIn(false);\r\n    }\r\n    else {\r\n      //console.log(response);\r\n      //setStatus(response.data[0].Username);\r\n      setisLoggedIn(true);\r\n      if(response.data[0].Username !==\"\" && response.data[0].password !== \"\"){\r\n        redirect(\"/profile\");\r\n      }else {\r\n        setStatus(\"Please enter a username and password\");\r\n      }\r\n\r\n\r\n\r\n\r\n\r\n\r\n    }\r\n  });\r\n  };\r\n\r\n\r\n\r\n// login post method\r\nconst refresh = ()=>{\r\n\r\n  Axios.post('http://localhost:3001/refresh', {\r\n\r\n\r\n}).then((response) => {\r\n  console.log(\"refresh response\" + response)\r\n});\r\n};\r\n\r\n\r\n// login post method\r\nconst update = () => {\r\n\r\n  Axios.post('http://localhost:3001/updateTable', {\r\n\r\n\r\n}).then((response) => {\r\n  console.log(\"update response\" + response)\r\n});\r\n};\r\n\r\n\r\n // login post method\r\n const loginRegi =  ()=>{\r\n  Axios.post('http://localhost:3001/login', {\r\n    usernameEmail: UsernameReg,\r\n    password: PasswordReg,\r\n\r\n}).then((response) => {\r\n  //console.log(\"details \" + UsernameReg + PasswordReg)\r\n  if(response.data.message){\r\n    //console.log(\"login regis response \" + response.data.message);\r\n    setisLoggedIn(false);\r\n  }else{\r\n    //console.log(\"this is the login \" + response);\r\n    redirect(\"/regiLanding\");\r\n  }\r\n\r\n});\r\n};\r\n\r\n\r\nconst help = () => {\r\n  setTimeout(update(), 5000)\r\n  setTimeout(refresh(), 5000)\r\n  setTimeout(loginRegi(),5000)\r\n}\r\n\r\n\r\n\r\n\r\n//on page loading check if cookie exist for user being logged  in\r\nuseEffect( ()=> {\r\n    Axios.get('http://localhost:3001/checklogin').then((response)=> {\r\n    if(response.data.loggedIn === true){\r\n      //console.log(response);\r\n      //setStatus(response.data.user[0].Username);\r\n      setisLoggedIn(true);\r\n\r\n    }\r\n\r\n    });\r\n  }, []);\r\n\r\n\r\n return (\r\n\r\n\r\n  <div className=\"App\">\r\n    <div className=\"regi\">\r\n      <h1 className=\"headings\">Sign Up</h1>\r\n      {/*input for registration username */}\r\n      <input className=\"regiUN\" type=\"text\" placeholder=\"Username\" onChange={(e) => {\r\n        setUsernameReg(e.target.value);\r\n      }}/>\r\n      <input className=\"regiEmail\" type=\"text\" placeholder=\"Optional Email\" onChange={(e) => {\r\n        setEmailReg(e.target.value);\r\n      }}/>\r\n      {/*input for registration password */}\r\n      <input className=\"regiP\" type=\"text\" onFocus={ () => setPasswordFocus(true)} onBlur={ () => setPasswordFocus(false)} placeholder=\"Password\" onChange={(e) => {\r\n\r\n        setPasswordReg(e.target.value);\r\n        checkValidity(e.target.value);\r\n      }} />\r\n\r\n      {/*input for registration confirmation password */}\r\n      <input className=\"conRegiP\" type=\"text\" placeholder=\"Confirm password\" onChange={(e) => {\r\n        setConPasswordReg(e.target.value);\r\n      }} />\r\n\r\n      {passwordFocus? <PasswordStrength validity={passwordValid}/>:null}\r\n\r\n      {/* register button that calls register function */}\r\n      <Button className=\"button\" onClick={(e) => {\r\n        register()\r\n      }}>Sign up</Button>\r\n      {//reveal status below regi form\r\n       !show?\r\n      <h2 className=\"headings\">{status}</h2>:null\r\n    }\r\n    { isRegi?\r\n    <Button onClick={help}> set up profile</Button>:null\r\n    }\r\n    </div>\r\n    <br></br>\r\n    {/*button for toggling open registration div */}\r\n\r\n    { //reveal login form\r\n      !show?\r\n    //button for toggling open registration div\r\n\r\n    <Button className=\"button2\" onClick={()=> {\r\n      setShow(!show)\r\n      setStatus(\"\")\r\n    }}>\r\n    Already a member? login </Button>:null\r\n    }\r\n    {\r\n      show?<div className=\"login\">\r\n\r\n      <h1 className=\"headings\">Login</h1>\r\n      {/*input for login username*/}\r\n      <input className=\"logUN\" type=\"text\" placeholder=\"Username or Email\" onChange={(e) => {\r\n        setUsernameEmail(e.target.value);\r\n      }} />\r\n      {/*input for login password */}\r\n      <input className=\"logP\" type=\"text\" placeholder=\"Password\" onChange={(e) => {\r\n        setPassword(e.target.value);\r\n      }}/>\r\n      <Button className=\"button\" onClick={ login }>Login</Button>\r\n      <br></br>\r\n      <Button className=\"button2\" onClick={()=> {\r\n        setShow(!show);\r\n        setStatus(\"\")}\r\n        }> <img className=\"up\" alt=\"hide\" src={up} /> </Button>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n</div>:null\r\n  }\r\n   {/* header for feedback of login or registration status */}\r\n\r\n  { // reveal status below login form\r\n  show?\r\n    <h2 className=\"headings\">{status}</h2>:null\r\n    }\r\n</div>\r\n\r\n\r\n );\r\n\r\n\r\n\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}