{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/lachlanmackay/g16/client/src/App.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport './App.css';\nimport Axios from 'axios';\nimport { resolve } from 'dns';\nimport PasswordStrength from \"./passwordStrength\";\nimport Button from \"react-bootstrap/Button\";\nimport { BrowserRouter as Router, Switch, Route, Link, Redirect } from \"react-router-dom\";\nimport Profile from \"./profile\";\nimport ProtectedRoute from \"./protectedRoute\";\nimport { useHistory, withRouter } from \"react-router-dom\";\n\nfunction App() {\n  _s();\n\n  //username for registration\n  const [UsernameReg, setUsernameReg] = useState(''); //username for registration\n\n  const [EmailReg, setEmailReg] = useState(''); //password for registration \n\n  const [PasswordReg, setPasswordReg] = useState(''); //confirm password for registration \n\n  const [ConPasswordReg, setConPasswordReg] = useState(''); //username for login\n\n  const [UsernameEmail, setUsernameEmail] = useState(''); //password for login \n\n  const [Password, setPassword] = useState('');\n  const [passwordFocus, setPasswordFocus] = useState(false);\n  const [passwordValid, setPasswordValid] = useState({\n    minlength: null,\n    number: null,\n    specialChar: null,\n    illegalChar: null\n  }); //checks if a user is logged in \n\n  const [isLoggedIn, setisLoggedIn] = useState(false); //status of the feedback header at the bottom of the page \n\n  const [status, setStatus] = useState(''); //toggle for registration div\n\n  const [show, setShow] = useState(false); //credintials for get, using axios\n\n  Axios.defaults.withCredentials = true;\n  const isNumber = /\\d/;\n  const specialCharacterRegx = /[ !@#$%^&*()_+\\-=\\[\\]{}'\"\\\\|,.\\/]/;\n  const illegalCharacterRegx = /[<>;:?]/;\n\n  const checkValidity = password => {\n    setPasswordValid({\n      minlength: password.length >= 8 ? true : false,\n      number: isNumber.test(password) ? true : false,\n      specialChar: specialCharacterRegx.test(password) ? true : false,\n      illegalChar: illegalCharacterRegx.test(password) ? false : true\n    });\n  }; // register post method \n\n\n  const register = () => {\n    if (passwordValid.illegalChar === true && passwordValid.minlength === true && passwordValid.specialChar === true && passwordValid.number === true) {\n      if (PasswordReg === ConPasswordReg) {\n        setStatus(\"You have registered!\");\n        Axios.post('http://localhost:3001/register', {\n          username: UsernameReg,\n          password: PasswordReg,\n          email: EmailReg\n        }).then(response => {//console.log(response)\n        });\n      } else {\n        setStatus(\"Passwords do not match\");\n      }\n    } else {\n      setStatus(\"Password is invalid\");\n    }\n  };\n\n  const history = useHistory(); // login post method \n\n  const login = props => {\n    //this.props.history\n    Axios.post('http://localhost:3001/login', {\n      usernameEmail: UsernameEmail,\n      password: Password\n    }).then(response => {\n      if (response.data.message) {\n        setStatus(response.data.message);\n      } else {\n        console.log(response);\n        setStatus(response.data[0].Username);\n        setisLoggedIn(true);\n        props.history.push('/profile');\n      }\n    });\n  }; //on page loading check if cookie exist for user being logged  in\n\n\n  useEffect(() => {\n    Axios.get('http://localhost:3001/checklogin').then(response => {\n      if (response.data.loggedIn === true) {\n        //console.log(response);\n        setStatus(response.data.user[0].Username);\n        setisLoggedIn(true);\n      }\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(Router, {\n    children: [/*#__PURE__*/_jsxDEV(Route, {\n      path: \"/\",\n      exact: true,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"App\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"login\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"logUN\",\n            type: \"text\",\n            placeholder: \"Username or Email\",\n            onChange: e => {\n              setUsernameEmail(e.target.value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"logP\",\n            type: \"text\",\n            placeholder: \"Password\",\n            onChange: e => {\n              setPassword(e.target.value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            onClick: login,\n            children: \"Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 11\n          }, this), () => {\n            if (isLoggedIn) {\n              /*#__PURE__*/\n              _jsxDEV(Redirect, {\n                to: \"/profile\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 168,\n                columnNumber: 13\n              }, this);\n            }\n          }]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 5\n        }, this), !show ? /*#__PURE__*/_jsxDEV(Button, {\n          onClick: () => setShow(!show),\n          children: \" Register \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 5\n        }, this) : null, show ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"regi\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"Create an account\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"regiUN\",\n            type: \"text\",\n            placeholder: \"Username\",\n            onChange: e => {\n              setUsernameReg(e.target.value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"regiEmail\",\n            type: \"text\",\n            placeholder: \"Optional Email\",\n            onChange: e => {\n              setEmailReg(e.target.value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"regiP\",\n            type: \"text\",\n            onFocus: () => setPasswordFocus(true),\n            onBlur: () => setPasswordFocus(false),\n            placeholder: \"Password\",\n            onChange: e => {\n              console.log(passwordFocus);\n              setPasswordReg(e.target.value);\n              checkValidity(e.target.value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"conRegiP\",\n            type: \"text\",\n            placeholder: \"Confirm password\",\n            onChange: e => {\n              setConPasswordReg(e.target.value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 11\n          }, this), passwordFocus ? /*#__PURE__*/_jsxDEV(PasswordStrength, {\n            validity: passwordValid\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 27\n          }, this) : null, /*#__PURE__*/_jsxDEV(Button, {\n            onClick: register,\n            children: \"Register\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            onClick: () => setShow(false),\n            children: \" Hide \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 12\n        }, this) : null, /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: status\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 3\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 3\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 3\n    }, this), /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n      path: \"/profile\",\n      component: Profile,\n      isAuth: isLoggedIn\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 3\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 150,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"Nbi9Mrher+ymiM372WBFxkzxc78=\", false, function () {\n  return [useHistory];\n});\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/Users/lachlanmackay/g16/client/src/App.js"],"names":["React","useState","useEffect","Axios","resolve","PasswordStrength","Button","BrowserRouter","Router","Switch","Route","Link","Redirect","Profile","ProtectedRoute","useHistory","withRouter","App","UsernameReg","setUsernameReg","EmailReg","setEmailReg","PasswordReg","setPasswordReg","ConPasswordReg","setConPasswordReg","UsernameEmail","setUsernameEmail","Password","setPassword","passwordFocus","setPasswordFocus","passwordValid","setPasswordValid","minlength","number","specialChar","illegalChar","isLoggedIn","setisLoggedIn","status","setStatus","show","setShow","defaults","withCredentials","isNumber","specialCharacterRegx","illegalCharacterRegx","checkValidity","password","length","test","register","post","username","email","then","response","history","login","props","usernameEmail","data","message","console","log","Username","push","get","loggedIn","user","e","target","value"],"mappings":"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","sourcesContent":["import React, {useState, useEffect}       from 'react';\nimport './App.css';\nimport Axios from 'axios';\nimport { resolve } from 'dns';\nimport PasswordStrength from \"./passwordStrength\";\nimport Button from \"react-bootstrap/Button\";\nimport {BrowserRouter as Router, Switch, Route, Link, Redirect }from \"react-router-dom\";\nimport Profile from \"./profile\";\nimport ProtectedRoute from \"./protectedRoute\";\nimport { useHistory, withRouter } from \"react-router-dom\";\n\n\n\nfunction App() {\n\n  \n\n  \n  \n  \n  \n  //username for registration\n  const [UsernameReg, setUsernameReg] = useState('');\n\n  //username for registration\n  const [EmailReg, setEmailReg] = useState('');\n\n  //password for registration \n  const [PasswordReg, setPasswordReg] = useState('');\n\n  //confirm password for registration \n  const [ConPasswordReg, setConPasswordReg] = useState('');\n\n  //username for login\n  const [UsernameEmail, setUsernameEmail] = useState('');\n\n  //password for login \n  const [Password, setPassword] = useState('');\n\n  const [passwordFocus, setPasswordFocus] = useState(false);\n\n  const [passwordValid, setPasswordValid] = useState({\n    minlength: null,\n    number: null,\n    specialChar: null,\n    illegalChar: null\n  });\n\n//checks if a user is logged in \n  const [isLoggedIn, setisLoggedIn] = useState(false);\n\n  \n  \n\n  //status of the feedback header at the bottom of the page \n  const [status, setStatus] = useState('');\n\n  //toggle for registration div\n  const [show, setShow] = useState(false);\n\n  //credintials for get, using axios\n  Axios.defaults.withCredentials = true;\n\n  const isNumber =/\\d/;\n  const specialCharacterRegx = /[ !@#$%^&*()_+\\-=\\[\\]{}'\"\\\\|,.\\/]/;\n  const illegalCharacterRegx = /[<>;:?]/;\n\n  const checkValidity = password => {\n    setPasswordValid({\n      minlength: password.length >= 8 ? true : false,\n      number: isNumber.test(password) ? true : false,\n      specialChar: specialCharacterRegx.test(password) ? true : false,\n      illegalChar: illegalCharacterRegx.test(password) ? false : true \n    })\n  }\n  // register post method \n  const register = () => {\n    \n\n    if(passwordValid.illegalChar === true && passwordValid.minlength === true && passwordValid.specialChar === true && passwordValid.number === true) {\n      if(PasswordReg === ConPasswordReg){\n        setStatus(\"You have registered!\");\n        Axios.post('http://localhost:3001/register', {\n        username: UsernameReg,\n        password: PasswordReg,\n        email: EmailReg\n  \n        }).then((response) => {\n        //console.log(response)\n        });\n      }\n      else{\n        setStatus(\"Passwords do not match\");\n      }\n      \n    }\n    else {\n      setStatus(\"Password is invalid\");\n    }\n    \n  };\n\n  const history = useHistory();\n  // login post method \n  const login = props => {\n    //this.props.history\n    Axios.post('http://localhost:3001/login', {\n      usernameEmail: UsernameEmail,\n      password: Password,\n\n  }).then((response) => {\n    if(response.data.message){\n      setStatus(response.data.message);\n    }\n    else {\n      console.log(response);\n      setStatus(response.data[0].Username);\n      setisLoggedIn(true);\n      \n      props.history.push('/profile');\n      \n      \n      \n    }\n  });\n  };\n\n\n//on page loading check if cookie exist for user being logged  in\nuseEffect( ()=> {\n    Axios.get('http://localhost:3001/checklogin').then((response)=> {\n    if(response.data.loggedIn === true){\n      //console.log(response);\n      setStatus(response.data.user[0].Username);\n      setisLoggedIn(true);\n      \n      \n       \n      \n      \n      \n    }\n    \n    });\n  }, []);\n\n\n return (\n\n    <Router>\n\n  <Route path='/' exact>\n  <div className=\"App\">\n\n    <div className=\"login\">\n\n          <h1>Login</h1>\n          {/*input for login username*/}\n          <input className=\"logUN\" type=\"text\" placeholder=\"Username or Email\" onChange={(e) => {\n            setUsernameEmail(e.target.value);\n          }} />\n          {/*input for login password */}\n          <input className=\"logP\" type=\"text\" placeholder=\"Password\" onChange={(e) => {\n            setPassword(e.target.value);\n          }}/>\n          <Button onClick={login}>Login</Button>\n         { () => {if(isLoggedIn){\n            <Redirect to=\"/profile\"/>\n         }}}\n          \n\n\n        \n    \n    </div>\n    <br></br>\n    {/*button for toggling open registration div */}\n    { !show?\n    <Button onClick={()=> setShow(!show)}> Register </Button>:null\n    }\n    { \n      show?<div className=\"regi\">\n\n          <h1>Create an account</h1>\n          {/*input for registration username */}\n          <input className=\"regiUN\" type=\"text\" placeholder=\"Username\" onChange={(e) => {\n            setUsernameReg(e.target.value);\n          }}/>\n          <input className=\"regiEmail\" type=\"text\" placeholder=\"Optional Email\" onChange={(e) => {\n            setEmailReg(e.target.value);\n          }}/>\n          {/*input for registration password */}\n          <input className=\"regiP\" type=\"text\" onFocus={ () => setPasswordFocus(true)} onBlur={ () => setPasswordFocus(false)} placeholder=\"Password\" onChange={(e) => {\n            console.log(passwordFocus);\n            setPasswordReg(e.target.value);\n            checkValidity(e.target.value);\n          }} />\n          \n          {/*input for registration confirmation password */}\n          <input className=\"conRegiP\" type=\"text\" placeholder=\"Confirm password\" onChange={(e) => {\n            setConPasswordReg(e.target.value);\n          }} />\n\n          {passwordFocus? <PasswordStrength validity={passwordValid}/>:null}\n\n          {/* register button that calls register function */}\n          <Button onClick={register}>Register</Button>\n          <Button onClick={() => setShow(false)}> Hide </Button>\n         \n        \n    </div>:null\n  }\n   {/* header for feedback of login or registration status */}\n  <h1>{status}</h1>\n</div>\n  </Route>\n  \n  <ProtectedRoute path=\"/profile\" component={Profile} isAuth={isLoggedIn}/>\n</Router>\n );\n\n\n   \n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}