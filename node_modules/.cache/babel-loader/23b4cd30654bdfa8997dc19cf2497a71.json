{"ast":null,"code":"import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _classCallCheck from\"C:/Users/evan_/Documents/GitHub/picshare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/evan_/Documents/GitHub/picshare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/evan_/Documents/GitHub/picshare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/evan_/Documents/GitHub/picshare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{useState,useEffect}from'react';import ReactDOM from'react-dom';import Navbar from'./components/Navbar/NavBar';import SideDrawer from'./components/SideDrawer/SideDrawer';import Backdrop from'./components/Backdrop/Backdrop';import'./profile.css';import{BrowserRouter,Switch,Route,Link,Redirect,withRouter,useHistory}from\"react-router-dom\";import Axios from'axios';import{userInfo}from'os';var specialCharacterRegx=/[ !@#$%^&*()_+\\-=[\\]{}'\"\\\\|,./]/;var illegalCharacterRegx=/[<>;:?]/;var emailRegex=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;var Username,Fname,Lname,CommEmail,user,PostID,userId=\"\";// Variables which can be used to update users details\n//credintials for get, using axios\nAxios.defaults.withCredentials=true;var Profile=/*#__PURE__*/function(_React$Component){_inherits(Profile,_React$Component);var _super=_createSuper(Profile);function Profile(props){var _this;_classCallCheck(this,Profile);_this=_super.call(this,props);_this.state={sideDrawerOpen:false};_this.drawerToggleClick=function(){_this.setState(function(prevState){return{sideDrawerOpen:!prevState.sideDrawerOpen};});};_this.backdropClick=function(){_this.setState({sideDrawerOpen:false});};_this.state={usersPostArray:[],// An array to store the users post information\nusersInfoArray:[],// An array to store the users information when fetched from the db\nkeywords:'',users:[],followedUserIds:[],fans:[]};return _this;}_createClass(Profile,[{key:\"getUserInfo\",value:function getUserInfo(){var _this2=this;Axios.post('http://localhost:3001/users',{username:user}).then(function(response){if(response){_this2.setState({usersInfoArray:response.data// Store the information in the users info array\n});}else{console.log(\"no response\");}});Axios.post('http://localhost:3001/myposts',{username:user}).then(function(response){console.log(response.data);if(response){_this2.setState({usersPostArray:response.data});}else{console.log(\"no response\");}});}},{key:\"componentDidMount\",value:function componentDidMount(){var _this3=this;// Runs after the first render\nAxios.get('http://localhost:3001/checklogin').then(function(response){if(response.data.loggedIn===true){user=response.data.user[0].username;userId=response.data.user[0].userID;_this3.getUserInfo();_this3.getFollowedUsers();_this3.getFans();// Fetch the users info and posts by calling function\n}});}},{key:\"checkValidity\",value:function checkValidity(e){// Method to check if user first name and surname are valid\nvar count=0;specialCharacterRegx.test(e)?count--:count++;illegalCharacterRegx.test(e)?count--:count++;return count===2;}},{key:\"checkEmailValidity\",value:function checkEmailValidity(e){// check if email is valid\nvar count=0;emailRegex.test(e)?count--:count++;return count===1;}},{key:\"handleSubmit\",value:function handleSubmit(event){// Handle POST\nevent.preventDefault();Axios.post('/update',{//Send to backend express nodejs server\nusername:Username,fname:Fname,lname:Lname,commEmail:CommEmail});this.getUserInfo();window.location.reload();}},{key:\"handleUploadImage\",value:function handleUploadImage(e,info,i){var isAvatar=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;var input=document.createElement('input');input.type='file';input.style.display='none';input.accept='image/*';document.body.appendChild(input);input.click();var self=this;input.onchange=function(){var image=input.files[0];var reader=new FileReader();reader.onload=function(){var base64=reader.result;Axios.post('http://localhost:3001/'+(isAvatar?'updateAvatar':'updateBackgroundImage')+'?profileID='+info.profileID,{img:base64},{'Content-Type':'application/json'}).then(function(response){if(response){var array=self.state.usersInfoArray;if(isAvatar){info.Image=base64;}else{info.BackgroundImage=base64;}array[i]=info;self.setState({usersInfoArray:array});}else{console.log(\"no response\");}});};reader.readAsDataURL(image);input.onchange=null;input.remove();};}},{key:\"getFollowedUsers\",value:function getFollowedUsers(){var _this4=this;Axios.get('http://localhost:3001/getFollowedUsers?userId='+userId).then(function(response){if(response){_this4.setState({followedUserIds:response.data.map(function(user){console.log(user.UserID);return user.UserID;})});}else{console.log('no response');}});}},{key:\"getFans\",value:function getFans(){var _this5=this;Axios.get('http://localhost:3001/getFans?userId='+userId).then(function(response){if(response){_this5.setState({fans:response.data});}else{console.log('no response');}});}},{key:\"searchUsers\",value:function searchUsers(keywords){var self=this;Axios.post('http://localhost:3001/search_users',{name:keywords,userid:userId}).then(function(response){if(response){self.setState({users:response.data});}else{console.log('no response');}});}},{key:\"follow\",value:function follow(id){var _this6=this;var self=this;console.log(userId);console.log(id);if(userId!=id){Axios.post('http://localhost:3001/follow',{userId:userId,followUserId:id}).then(function(response){if(response){var ids=_this6.state.followedUserIds;ids.push(id);self.setState({followedUserIds:ids});self.getFans();}else{console.log('no response');}});}}},{key:\"deleteImage\",value:function deleteImage(event){// Handle POST\nevent.preventDefault();var r=window.confirm(\"Are you sure you want to delete, this cannot be undone\");if(r==true){console.log(PostID);Axios.post('/deletepost',{//Send to backend express nodejs server\npostid:PostID});this.getUserInfo();window.location.reload();}}},{key:\"render\",value:function render(){var _this7=this;var backdrop;var sideDrawer;if(this.state.sideDrawerOpen){sideDrawer=/*#__PURE__*/_jsx(SideDrawer,{});backdrop=/*#__PURE__*/_jsx(Backdrop,{click:this.backdropClick});}return/*#__PURE__*/_jsx(_Fragment,{children:this.state.usersInfoArray.map(function(info,i){Username=info.username;return/*#__PURE__*/_jsxs(\"div\",{class:\"profilePage\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(Navbar,{drawerClickedHandler:_this7.drawerToggleClick}),sideDrawer,backdrop]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"square\",title:\"click to upload background image\",style:{cursor:'pointer',height:'300px',backgroundSize:'100% 100%',backgroundImage:info.backgroundImage?\"url(\".concat(info.backgroundImage,\")\"):'url(\"https://tomaszjanickiphoto.co.uk/wp-content/gallery/scotland/DSC_8286.jpg\")'},onClick:function onClick(e){_this7.handleUploadImage(e,info,i,false);},children:/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"img\",{src:info.image,alt:\"No Image set\",style:{width:'80px',height:'80px',display:'inline-block',margin:'10px',fontSize:'14px',lineHeight:'80px',textAlign:'center',cursor:'pointer'},onClick:function onClick(e){e.stopPropagation();_this7.handleUploadImage(e,info,i,true);}}),info.fname,\" \",info.lname,/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"br\",{}),\"I have\",/*#__PURE__*/_jsx(\"span\",{style:{color:'red',fontWeight:600,margin:'0 10px'},children:_this7.state.fans.length}),\"followers and\",/*#__PURE__*/_jsx(\"span\",{style:{color:'red',fontWeight:600,margin:'0 10px'},children:info.points}),\"points\"]})]})})}),/*#__PURE__*/_jsx(\"h3\",{children:\"My Account\"}),/*#__PURE__*/_jsx(\"p\",{children:\"View and edit your personal info below\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"searcher\",children:[/*#__PURE__*/_jsx(\"input\",{defaultValue:_this7.state.keywords,placeholder:\"search other users\",onChange:function onChange(e){_this7.setState({keywords:e.target.value});}}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){if(_this7.state.keywords.trim()){_this7.searchUsers(_this7.state.keywords.trim());}},children:\"search users\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"user-list\",children:_this7.state.users.map(function(user){return/*#__PURE__*/_jsxs(\"div\",{className:\"user\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[user.username,\"   \"]}),_this7.state.followedUserIds.includes(user.userID)?/*#__PURE__*/_jsx(\"button\",{className:\"disabled\",children:\"Followed\"}):/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){_this7.follow(user.userID);},children:\"Follow\"})]});})}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Login Email: \",info.login_Email]}),/*#__PURE__*/_jsx(\"div\",{class:\"form\",children:/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"div\",{class:\"form-entry\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"row-label\",children:/*#__PURE__*/_jsx(\"label\",{htmlFor:\"fname\",children:\"First name:\"})}),/*#__PURE__*/_jsx(\"div\",{class:\"row-field\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"fname\",name:\"fname\",autoComplete:\"new-password\",defaultValue:info.fname,onChange:function onChange(e){Fname=e.target.value;}})})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"form-entry\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"row-label\",children:/*#__PURE__*/_jsx(\"label\",{htmlFor:\"lname\",children:\"Last name:\"})}),/*#__PURE__*/_jsx(\"div\",{class:\"row-field\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"lname\",name:\"lname\",autoComplete:\"new-password\",defaultValue:info.lname,onChange:function onChange(e){Lname=e.target.value;}})})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"form-entry\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"row-label\",children:/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Contact Email: \"})}),/*#__PURE__*/_jsx(\"div\",{class:\"row-field\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"email\",name:\"email\",autoComplete:\"new-password\",defaultValue:info.comm_email,onChange:function onChange(e){CommEmail=e.target.value;}})})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{class:\"form-entry\",children:/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Update Info\",class:\"submitbutton\",onClick:function onClick(e){if(!(_this7.checkValidity(Fname)&&_this7.checkValidity(Lname)&&_this7.checkEmailValidity(CommEmail.toLowerCase))||!(Fname.length>0)||!(Lname.length>0)||!(CommEmail.length>0)){alert(\"The fields must not be empty or contain illegal characters\");}else{alert(\"Successfully Updated\");_this7.handleSubmit(e);}}})})]})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h3\",{children:\" My Posts (Most recent first)\"}),_this7.state.usersPostArray.map(function(post){return/*#__PURE__*/_jsxs(\"div\",{children:[\" \",/*#__PURE__*/_jsx(\"img\",{src:post.Image,width:\"200\",height:\"200\",px:true}),\" \",/*#__PURE__*/_jsx(\"h3\",{children:post.PostDes}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Delete Image\",class:\"deletebutton\",onClick:function onClick(e){PostID=post.PostID;_this7.deleteImage(e);}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"hr\",{class:\"solid2\"})]},post);}),/*#__PURE__*/_jsx(\"footer\",{children:\"\\xA9 2021 by Picshare\"})]})]},i);})});}}]);return Profile;}(React.Component);ReactDOM.render(/*#__PURE__*/_jsx(Profile,{}),document.getElementById('root'));export default withRouter(Profile);","map":{"version":3,"sources":["C:/Users/evan_/Documents/GitHub/picshare/src/profile.js"],"names":["React","useState","useEffect","ReactDOM","Navbar","SideDrawer","Backdrop","BrowserRouter","Switch","Route","Link","Redirect","withRouter","useHistory","Axios","userInfo","specialCharacterRegx","illegalCharacterRegx","emailRegex","Username","Fname","Lname","CommEmail","user","PostID","userId","defaults","withCredentials","Profile","props","state","sideDrawerOpen","drawerToggleClick","setState","prevState","backdropClick","usersPostArray","usersInfoArray","keywords","users","followedUserIds","fans","post","username","then","response","data","console","log","get","loggedIn","userID","getUserInfo","getFollowedUsers","getFans","e","count","test","event","preventDefault","fname","lname","commEmail","window","location","reload","info","i","isAvatar","input","document","createElement","type","style","display","accept","body","appendChild","click","self","onchange","image","files","reader","FileReader","onload","base64","result","profileID","img","array","Image","BackgroundImage","readAsDataURL","remove","map","UserID","name","userid","id","followUserId","ids","push","r","confirm","postid","backdrop","sideDrawer","cursor","height","backgroundSize","backgroundImage","handleUploadImage","width","margin","fontSize","lineHeight","textAlign","stopPropagation","color","fontWeight","length","points","target","value","trim","searchUsers","includes","follow","login_Email","comm_email","checkValidity","checkEmailValidity","toLowerCase","alert","handleSubmit","PostDes","deleteImage","Component","render","getElementById"],"mappings":"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","sourcesContent":["import React, {useState, useEffect}  from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport Navbar from './components/Navbar/NavBar';\r\nimport SideDrawer from './components/SideDrawer/SideDrawer';\r\nimport Backdrop from './components/Backdrop/Backdrop'\r\nimport './profile.css';\r\nimport {BrowserRouter , Switch, Route, Link, Redirect, withRouter, useHistory }from \"react-router-dom\";\r\nimport Axios from 'axios';\r\nimport { userInfo } from 'os';\r\n\r\n\r\n\r\nconst specialCharacterRegx = /[ !@#$%^&*()_+\\-=[\\]{}'\"\\\\|,./]/;\r\nconst illegalCharacterRegx = /[<>;:?]/;\r\nconst emailRegex = /[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;\r\nvar Username, Fname, Lname, CommEmail, user, PostID, userId = \"\"; // Variables which can be used to update users details\r\n\r\n //credintials for get, using axios\r\n Axios.defaults.withCredentials = true;\r\nclass Profile extends React.Component {\r\nconstructor(props) {\r\n  super(props);\r\n  this.state = {\r\n    usersPostArray: [], // An array to store the users post information\r\n    usersInfoArray: [], // An array to store the users information when fetched from the db\r\n    keywords: '',\r\n    users: [],\r\n    followedUserIds: [],\r\n    fans: []\r\n  };\r\n}\r\n\r\nstate = {\r\n    sideDrawerOpen: false\r\n};\r\n\r\ndrawerToggleClick = () => {\r\n    this.setState((prevState) => {\r\n        return { sideDrawerOpen: !prevState.sideDrawerOpen };\r\n    });\r\n};\r\n\r\nbackdropClick = () => {\r\n    this.setState({ sideDrawerOpen: false });\r\n};\r\n\r\n\r\ngetUserInfo() {\r\n  Axios.post('http://localhost:3001/users', {\r\n            username: user\r\n        }).then((response) => {\r\n          if(response){\r\n            this.setState({\r\n              usersInfoArray: response.data, // Store the information in the users info array\r\n            });\r\n          } else {\r\n            console.log(\"no response\")\r\n          }\r\n        });\r\n  Axios.post('http://localhost:3001/myposts', {\r\n          username: user\r\n      }).then((response) => {\r\n        console.log(response.data);\r\n        if(response){\r\n          this.setState({\r\n          usersPostArray: response.data,\r\n          });\r\n        } else {\r\n            console.log(\"no response\")\r\n            }\r\n          });\r\n}\r\n\r\ncomponentDidMount() { // Runs after the first render\r\n    Axios.get('http://localhost:3001/checklogin').then((response)=> {\r\n    if(response.data.loggedIn === true){\r\n      user = response.data.user[0].username\r\n      userId = response.data.user[0].userID\r\n      this.getUserInfo();\r\n      this.getFollowedUsers();\r\n      this.getFans(); // Fetch the users info and posts by calling function\r\n    }\r\n    });\r\n}\r\n\r\ncheckValidity(e) { // Method to check if user first name and surname are valid\r\n    var count = 0;\r\n    specialCharacterRegx.test(e) ? count-- : count++;\r\n    illegalCharacterRegx.test(e) ? count-- : count++;\r\n    return count === 2;\r\n}\r\n\r\ncheckEmailValidity(e) { // check if email is valid\r\n  var count = 0;\r\n  emailRegex.test(e) ? count-- : count++;\r\n  return count === 1;\r\n}\r\n\r\nhandleSubmit(event) { // Handle POST\r\n    event.preventDefault();\r\n    Axios.post('/update', { //Send to backend express nodejs server\r\n      username : Username,\r\n      fname : Fname,\r\n      lname : Lname,\r\n      commEmail : CommEmail,\r\n    });\r\n      this.getUserInfo();\r\n      window.location.reload();\r\n}\r\n\r\nhandleUploadImage (e, info, i, isAvatar=true) {\r\n        const input = document.createElement('input');\r\n        input.type = 'file';\r\n        input.style.display = 'none';\r\n        input.accept = 'image/*';\r\n        document.body.appendChild(input);\r\n        input.click();\r\n\r\n        const self = this;\r\n\r\n        input.onchange = function () {\r\n            const image = input.files[0];\r\n            const reader = new FileReader();\r\n            reader.onload = function () {\r\n                const base64 = reader.result;\r\n                Axios.post('http://localhost:3001/' + (isAvatar ? 'updateAvatar' : 'updateBackgroundImage') + '?profileID=' + info.profileID, {\r\n                    img: base64\r\n                }, {\r\n                    'Content-Type': 'application/json'\r\n                }).then((response) => {\r\n                    if (response) {\r\n                        const array = self.state.usersInfoArray;\r\n                        if (isAvatar) {\r\n                            info.Image = base64;\r\n                        } else {\r\n                            info.BackgroundImage = base64;\r\n                        }\r\n                        array[i] = info;\r\n                        self.setState({\r\n                            usersInfoArray: array\r\n                        });\r\n                    } else {\r\n                        console.log(\"no response\")\r\n                    }\r\n                });\r\n            };\r\n            reader.readAsDataURL(image);\r\n            input.onchange = null;\r\n            input.remove();\r\n        }\r\n    }\r\n\r\ngetFollowedUsers () {\r\n            Axios.get('http://localhost:3001/getFollowedUsers?userId=' + userId).then((response) => {\r\n                if (response) {\r\n                    this.setState({\r\n                        followedUserIds: response.data.map((user) => {\r\n                          console.log(user.UserID);\r\n                          return user.UserID\r\n                        })\r\n                    });\r\n                } else {\r\n                    console.log('no response');\r\n                }\r\n            });\r\n        }\r\n\r\n        getFans () {\r\n            Axios.get('http://localhost:3001/getFans?userId=' + userId).then((response) => {\r\n                if (response) {\r\n                    this.setState({\r\n                        fans: response.data\r\n                    });\r\n                } else {\r\n                    console.log('no response');\r\n                }\r\n            });\r\n        }\r\n\r\n        searchUsers (keywords) {\r\n        const self = this;\r\n        Axios.post('http://localhost:3001/search_users', {\r\n            name: keywords,\r\n            userid : userId\r\n        }).then((response) => {\r\n            if (response) {\r\n                self.setState({\r\n                    users: response.data\r\n                });\r\n            } else {\r\n                console.log('no response');\r\n            }\r\n        });\r\n  }\r\n\r\nfollow (id) {\r\n        const self = this;\r\n        console.log(userId);\r\n        console.log(id);\r\n        if(userId != id) {\r\n        Axios.post('http://localhost:3001/follow', {\r\n            userId: userId,\r\n            followUserId: id\r\n        }).then((response) => {\r\n            if (response) {\r\n                const ids = this.state.followedUserIds;\r\n                ids.push(id);\r\n                self.setState({\r\n                    followedUserIds: ids\r\n                });\r\n                self.getFans();\r\n            } else {\r\n                console.log('no response');\r\n            }\r\n        });\r\n      }\r\n\r\n    }\r\n\r\ndeleteImage(event) { // Handle POST\r\n    event.preventDefault();\r\n    var r = window.confirm(\"Are you sure you want to delete, this cannot be undone\");\r\n    if(r == true) {\r\n      console.log(PostID);\r\n      Axios.post('/deletepost', { //Send to backend express nodejs server\r\n      postid : PostID\r\n    });\r\n      this.getUserInfo();\r\n      window.location.reload();\r\n    }\r\n}\r\n\r\nrender() {\r\n\r\n    let backdrop;\r\n        let sideDrawer;\r\n\r\n        if (this.state.sideDrawerOpen) {\r\n            sideDrawer = <SideDrawer />;\r\n            backdrop = <Backdrop click={this.backdropClick} />\r\n        }\r\n\r\nreturn (\r\n  <>{this.state.usersInfoArray.map((info, i)=> {\r\n    Username = info.username\r\n    return(\r\n<div class = \"profilePage\" key = {i}>\r\n         <div className=\"App\">\r\n                <Navbar drawerClickedHandler={this.drawerToggleClick} />\r\n                {sideDrawer}\r\n                {backdrop}\r\n        </div>\r\n        <br/>\r\n        <div className = \"square\"\r\n        title = \"click to upload background image\"\r\n        style={{\r\n          cursor: 'pointer',\r\n          height: '300px',\r\n          backgroundSize: '100% 100%',\r\n          backgroundImage: info.backgroundImage ? `url(${info.backgroundImage})` : 'url(\"https://tomaszjanickiphoto.co.uk/wp-content/gallery/scotland/DSC_8286.jpg\")'\r\n          }}\r\n          onClick={(e) => {\r\n              this.handleUploadImage(e, info, i, false);\r\n          }}\r\n        >\r\n          <span>\r\n            <p>\r\n              <img\r\n                src = {info.image}\r\n                alt = 'No Image set'\r\n                style={{ width: '80px', height: '80px', display: 'inline-block', margin: '10px', fontSize: '14px', lineHeight: '80px', textAlign: 'center', cursor: 'pointer' }}\r\n                onClick={e => {\r\n                  e.stopPropagation();\r\n                  this.handleUploadImage(e, info, i, true);\r\n                }}\r\n                />\r\n              {info.fname} {info.lname}\r\n                <span>\r\n                <br/>\r\n                    I have\r\n                    <span style={{ color: 'red', fontWeight: 600, margin: '0 10px' }}>{this.state.fans.length}</span>\r\n                    followers and\r\n                    <span style={{ color: 'red', fontWeight: 600, margin: '0 10px' }}>{info.points}</span>\r\n                    points\r\n                </span>\r\n\r\n            </p>\r\n          </span>\r\n        </div>\r\n      <h3>My Account</h3>\r\n      <p>View and edit your personal info below</p>\r\n        <div className=\"searcher\">\r\n          <input defaultValue={this.state.keywords} placeholder=\"search other users\" onChange={(e) => {\r\n            this.setState({\r\n              keywords: e.target.value\r\n            });\r\n          }}/>\r\n          <button onClick={(e) => {\r\n            if (this.state.keywords.trim()) {\r\n              this.searchUsers(this.state.keywords.trim());\r\n            }\r\n            }}>search users</button>\r\n          </div>\r\n          <div className=\"user-list\">\r\n          {\r\n            this.state.users.map((user) => {\r\n            return (\r\n            <div className=\"user\">\r\n            <span>{user.username}   </span>\r\n            {\r\n              this.state.followedUserIds.includes(user.userID)\r\n              ?\r\n              <button className=\"disabled\">Followed</button>\r\n              :\r\n              <button onClick={(e) => {\r\n                this.follow(user.userID);\r\n              }}>Follow</button>\r\n              }\r\n              </div>\r\n            );\r\n          })\r\n        }\r\n      </div>\r\n      <p>Login Email: {info.login_Email}</p>\r\n      <div class = \"form\">\r\n      <form>\r\n\r\n          <div class = \"form-entry\">\r\n            <div class = \"row-label\">\r\n              <label htmlFor=\"fname\">First name:</label>\r\n            </div>\r\n            <div class = \"row-field\">\r\n              <input type=\"text\" id=\"fname\" name=\"fname\" autoComplete=\"new-password\" defaultValue = {info.fname} onChange={ (e) => {\r\n                  Fname = e.target.value;\r\n                }}/>\r\n            </div>\r\n          </div>\r\n\r\n          <div class = \"form-entry\">\r\n            <div class = \"row-label\">\r\n              <label htmlFor=\"lname\">Last name:</label>\r\n            </div>\r\n            <div class = \"row-field\">\r\n              <input type=\"text\" id=\"lname\" name=\"lname\" autoComplete=\"new-password\" defaultValue = {info.lname} onChange={ (e) => {\r\n                  Lname = e.target.value;\r\n                }}/>\r\n              </div>\r\n            </div>\r\n\r\n          <div class = \"form-entry\">\r\n            <div class = \"row-label\">\r\n              <label htmlFor=\"email\">Contact Email: </label>\r\n            </div>\r\n            <div class = \"row-field\">\r\n              <input type = \"text\" id=\"email\" name=\"email\" autoComplete=\"new-password\" defaultValue = {info.comm_email}  onChange={ (e) => {\r\n                  CommEmail = e.target.value;\r\n                }}/>\r\n              </div>\r\n            </div>\r\n          <br/>\r\n            <div class = \"form-entry\">\r\n              <input type=\"submit\" value=\"Update Info\" class = \"submitbutton\" onClick={(e) => {\r\n                if(!(this.checkValidity(Fname) && this.checkValidity(Lname) && this.checkEmailValidity(CommEmail.toLowerCase)) || (!(Fname.length > 0) || !(Lname.length > 0) || !(CommEmail.length > 0))) {\r\n                  alert(\"The fields must not be empty or contain illegal characters\");\r\n                }\r\n                else {\r\n                  alert(\"Successfully Updated\");\r\n                  this.handleSubmit(e);\r\n                }\r\n              }}/>\r\n            </div>\r\n      </form>\r\n      </div>\r\n      <div>\r\n      <br/>\r\n        <h3> My Posts (Most recent first)</h3>\r\n\r\n        {this.state.usersPostArray.map(post => <div key = {post}> <img src = {post.Image} width = \"200\" height = \"200\" px></img> <h3>{post.PostDes}</h3> <br/>\r\n      <input type=\"submit\" value=\"Delete Image\" class = \"deletebutton\" onClick={(e) => {\r\n          PostID = post.PostID;\r\n          this.deleteImage(e);\r\n        }}/>\r\n      <br/>\r\n      <hr class=\"solid2\"/>\r\n      </div>)}\r\n        <footer>\r\n          Â© 2021 by Picshare\r\n        </footer>\r\n        </div>\r\n</div>\r\n    )\r\n  })}\r\n  </>\r\n   );\r\n  }\r\n}\r\nReactDOM.render(\r\n    <Profile/>,\r\n    document.getElementById('root')\r\n  );\r\n\r\nexport default withRouter(Profile);\r\n"]},"metadata":{},"sourceType":"module"}